(this["webpackJsonppsi-frontend-mobile"]=this["webpackJsonppsi-frontend-mobile"]||[]).push([[0],{141:function(t,e,n){},142:function(t,e,n){},143:function(t,e,n){},144:function(t,e,n){"use strict";n.r(e);var c=n(0),o=n.n(c),i=n(30),a=n.n(i),s=n(71),r=n(16),u=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,153)).then((function(e){var n=e.getCLS,c=e.getFID,o=e.getFCP,i=e.getLCP,a=e.getTTFB;n(t),c(t),o(t),i(t),a(t)}))},h=n(72),l=n.n(h),j=n(90),d=n(28),O=n(50),f=n(62),b=n(61),p=n(101),x=n(15),v=n(149),g=n(102),m=n(74),M=n.n(m),L=n(38),B=n.n(L),I=(n(110),n(19)),z=n(12),w=n(147),S=n(1),E=function(){return Object(S.jsxs)("svg",{enableBackground:"new 0 0 24 24",height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(S.jsx)("rect",{fill:"none",height:"24",width:"24"}),Object(S.jsx)("path",{d:"M9.5,6.5v3h-3v-3H9.5 M11,5H5v6h6V5L11,5z M9.5,14.5v3h-3v-3H9.5 M11,13H5v6h6V13L11,13z M17.5,6.5v3h-3v-3H17.5 M19,5h-6v6 h6V5L19,5z M13,13h1.5v1.5H13V13z M14.5,14.5H16V16h-1.5V14.5z M16,13h1.5v1.5H16V13z M13,16h1.5v1.5H13V16z M14.5,17.5H16V19h-1.5 V17.5z M16,16h1.5v1.5H16V16z M17.5,14.5H19V16h-1.5V14.5z M17.5,17.5H19V19h-1.5V17.5z M22,7h-2V4h-3V2h5V7z M22,22v-5h-2v3h-3v2 H22z M2,22h5v-2H4v-3H2V22z M2,2v5h2V4h3V2H2z"})]})},H=function(t){return Object(S.jsx)(w.a,Object(z.a)({component:E},t))},_=function(){return Object(S.jsxs)("svg",{enableBackground:"new 0 0 24 24",height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(S.jsx)("path",{d:"M0,0h24v24H0V0z",fill:"none"}),Object(S.jsxs)("g",{children:[Object(S.jsx)("path",{d:"M19.5,3.5L18,2l-1.5,1.5L15,2l-1.5,1.5L12,2l-1.5,1.5L9,2L7.5,3.5L6,2v14H3v3c0,1.66,1.34,3,3,3h12c1.66,0,3-1.34,3-3V2 L19.5,3.5z M19,19c0,0.55-0.45,1-1,1s-1-0.45-1-1v-3H8V5h11V19z"}),Object(S.jsx)("rect",{height:"2",width:"6",x:"9",y:"7"}),Object(S.jsx)("rect",{height:"2",width:"2",x:"16",y:"7"}),Object(S.jsx)("rect",{height:"2",width:"6",x:"9",y:"10"}),Object(S.jsx)("rect",{height:"2",width:"2",x:"16",y:"10"})]})]})},T=function(t){return Object(S.jsx)(w.a,Object(z.a)({component:_},t))},U=function(){return Object(S.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(S.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(S.jsx)("path",{d:"M18.41 5.8L17.2 4.59c-.78-.78-2.05-.78-2.83 0l-2.68 2.68L3 15.96V20h4.04l8.74-8.74 2.63-2.63c.79-.78.79-2.05 0-2.83zM6.21 18H5v-1.21l8.66-8.66 1.21 1.21L6.21 18zM11 20l4-4h6v4H11z"})]})},V=function(t){return Object(S.jsx)(w.a,Object(z.a)({component:U},t))},k=function(){return Object(S.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(S.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(S.jsx)("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"})]})},y=function(t){return Object(S.jsx)(w.a,Object(z.a)({component:k},t))},N=function(){return Object(S.jsxs)("svg",{enableBackground:"new 0 0 24 24",height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#ffffff",children:[Object(S.jsx)("g",{children:Object(S.jsx)("path",{d:"M0,0h24v24H0V0z",fill:"none"})}),Object(S.jsx)("g",{children:Object(S.jsx)("path",{d:"M17,8l-1.41,1.41L17.17,11H9v2h8.17l-1.58,1.58L17,16l4-4L17,8z M5,5h7V3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h7v-2H5V5z"})})]})},C=function(t){return Object(S.jsx)(w.a,Object(z.a)({component:N},t))},P=function(){return Object(S.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#ffffff",children:[Object(S.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(S.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM7.07 18.28c.43-.9 3.05-1.78 4.93-1.78s4.51.88 4.93 1.78C15.57 19.36 13.86 20 12 20s-3.57-.64-4.93-1.72zm11.29-1.45c-1.43-1.74-4.9-2.33-6.36-2.33s-4.93.59-6.36 2.33C4.62 15.49 4 13.82 4 12c0-4.41 3.59-8 8-8s8 3.59 8 8c0 1.82-.62 3.49-1.64 4.83zM12 6c-1.94 0-3.5 1.56-3.5 3.5S10.06 13 12 13s3.5-1.56 3.5-3.5S13.94 6 12 6zm0 5c-.83 0-1.5-.67-1.5-1.5S11.17 8 12 8s1.5.67 1.5 1.5S12.83 11 12 11z"})]})},A=function(t){return Object(S.jsx)(w.a,Object(z.a)({component:P},t))},Y=function(){return Object(S.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(S.jsx)("path",{d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z",fill:"none"}),Object(S.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"})]})},G=function(t){return Object(S.jsx)(w.a,Object(z.a)({component:Y},t))},R=function(){return Object(S.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(S.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(S.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})]})},D=function(t){return Object(S.jsx)(w.a,Object(z.a)({component:R},t))},K=function(){return Object(S.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(S.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(S.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"})]})},J=function(t){return Object(S.jsx)(w.a,Object(z.a)({component:K},t))},F=function(){return Object(S.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(S.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(S.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})]})},Q=function(t){return Object(S.jsx)(w.a,Object(z.a)({component:F},t))},q=n(77),W=n(91),X=n(148),Z=n(151),$=n(48),tt=n.n($),et="http://api.psi.motobuy.cc:8080/api",nt=function(){var t=document.cookie.split(";").find((function(t){return t.includes("MOTOBUY_MOBILE_AUTH")}));return t?t.split("=")[1]:""},ct=function(t,e,n){var c={url:et+e,method:t,timeout:6e4,headers:{Authorization:"Basic "+nt()}};return"get"===t&&n&&Object.keys(n).length>0?c.params=n:n&&Object.keys(n).length>0&&(c.data=n),new Promise((function(t,e){tt()(c).then((function(e){return t(e)})).catch((function(t){e(t.response),401===t.response.status&&window.logout(),console.log(t.response)}))}))},ot=function(t){var e=document.cookie.split(";"),n=e.find((function(t){return t.includes("MOTOBUY_MOBILE_KEEP_LOGIN")}))&&"true"===e.find((function(t){return t.includes("MOTOBUY_MOBILE_KEEP_LOGIN")})).split("=")[1],o=Object(c.useState)(!1),i=Object(q.a)(o,2),a=i[0],s=i[1],r=Object(c.useState)({userId:"",password:""}),u=Object(q.a)(r,2),h=u[0],l=u[1];Object(c.useEffect)((function(){document.title="\u767b\u5165 - MOTOBUY PSI",Object(I.b)().replace("/")}),[h]);var j=function(t,e){h[t]=e.target.value,l(h)};return Object(S.jsx)("div",{className:"login-wrapper",children:Object(S.jsxs)("div",{className:"login-board",children:[Object(S.jsxs)("div",{className:"login-board-header",children:[Object(S.jsx)("div",{className:"login-board-logo",children:"M"}),Object(S.jsx)("h1",{className:"login-board-title",children:"MOTOBUY PSI"})]}),Object(S.jsxs)("div",{className:"login-board-form",children:[Object(S.jsx)(X.a,{placeholder:"User ID",prefix:Object(S.jsx)(Q,{}),onChange:function(t){return j("userId",t)}}),Object(S.jsx)(X.a.Password,{placeholder:"Password",prefix:Object(S.jsx)(J,{}),iconRender:function(t){return t?Object(S.jsx)(D,{}):Object(S.jsx)(G,{})},onChange:function(t){return j("password",t)}}),Object(S.jsx)(Z.a,{defaultChecked:n,onChange:function(t){return n=t.target.checked},children:"Keep me logged."})]}),Object(S.jsx)("div",{className:"login-board-footer",children:Object(S.jsx)(g.a,{onClick:function(){s(!0),document.cookie=n?"MOTOBUY_MOBILE_KEEP_LOGIN=".concat(n,"; path=/; max-age=86400"):"MOTOBUY_MOBILE_KEEP_LOGIN=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",function(t,e,n){var c={url:et+e,method:t,timeout:6e4};return"get"===t&&n&&Object.keys(n).length>0?c.params=n:n&&Object.keys(n).length>0&&(c.data=n),new Promise((function(t,e){tt()(c).then((function(e){return t(e)})).catch((function(t){e(t),console.log(t.response)}))}))}("post","/v1/author/login",h).then((function(e){var c=e.data;if(0===c.code){p.b.success("\u767b\u5165\u6210\u529f");var o=new W.Buffer("".concat(h.userId,":").concat(h.password)).toString("base64");document.cookie="MOTOBUY_MOBILE_AUTH=".concat(o,n?"; path=/; max-age=86400":"; path=/"),localStorage.setItem("MOTOBUY_MOBILE_USERNAME",c.data.username),localStorage.setItem("MOTOBUY_MOBILE_ROLES",JSON.stringify(c.data.authorities.map((function(t){return t.authority})))),setTimeout((function(){return t.onLogin()}),200)}else p.b.error("\u767b\u5165\u5931\u6557"),s(!1)})).catch((function(t){p.b.error("\u767b\u5165\u5931\u6557"),s(!1)}))},loading:a,children:"LOGIN"})})]})})},it=n(150),at=n(152),st=function(t){var e=Object(I.b)(),n=function(t){return e.push(t)};return Object(S.jsx)("div",{className:"mainpage-wrapper",children:Object(S.jsxs)(it.a,{gutter:[24,20],children:[Object(S.jsx)(at.a,{span:12,children:Object(S.jsxs)(g.a,{disabled:!0,onClick:function(){return n("/Delivery")},children:[Object(S.jsx)(y,{}),"\u51fa\u8ca8\u767b\u8a18"]})}),Object(S.jsx)(at.a,{span:12,children:Object(S.jsxs)(g.a,{disabled:!0,onClick:function(){return n("/Receive")},children:[Object(S.jsx)(V,{}),"\u92b7\u8ca8\u7c3d\u6536"]})}),Object(S.jsx)(at.a,{span:12,children:Object(S.jsxs)(g.a,{disabled:!0,onClick:function(){return n("/Sale")},children:[Object(S.jsx)(T,{}),"\u92b7\u8ca8\u55ae\u660e\u7d30"]})}),Object(S.jsx)(at.a,{span:12,children:Object(S.jsxs)(g.a,{onClick:function(){return n("/Product")},children:[Object(S.jsx)(H,{}),"\u5546\u54c1\u8cc7\u8a0a"]})})]})})},rt=n(99),ut=function t(){Object(d.a)(this,t),this.getProductInfo=function(t){return ct("get","/v1/products/productId/".concat(t)).then((function(t){return t.data}))}},ht=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(t){var c;return Object(d.a)(this,n),(c=e.call(this,t)).productApi=new ut,c.searchTime=0,c.html5QrcodeScanner=null,c.onScan=function(t){c.setState({data:t})},c.onError=function(t){c.setState({data:t})},c.onSearch=function(t){c.searchTime=B()().valueOf(),c.setState({productId:t.target.value},(function(){setTimeout((function(){B()().valueOf()-c.searchTime>=500&&c.productApi.getProductInfo(c.state.productId).then((function(t){0===t.code?c.setState({getInfo:!0,info:t.data}):c.setState({getInfo:!1,info:{}})})).catch((function(){c.setState({getInfo:!1,info:{}})}))}),500)}))},c.onSearchByScan=function(){c.productApi.getProductInfo(c.state.productId).then((function(t){0===t.code?c.setState({getInfo:!0,info:t.data}):c.setState({getInfo:!1,info:{}})})).catch((function(){c.setState({getInfo:!1,info:{}})}))},c.state={productId:"",getInfo:!1,info:{},isScan:!1,data:null},c}return Object(O.a)(n,[{key:"render",value:function(){return Object(S.jsxs)("div",{className:"product-wrapper",children:[Object(S.jsxs)("div",{className:"product-search",children:[Object(S.jsx)(X.a,{value:this.state.productId,placeholder:"\u8f38\u5165\u5546\u54c1\u7de8\u865f\u6216\u6383\u63cfQR code",onChange:this.onSearch}),Object(S.jsx)(g.a,{type:"primary",onClick:this.getQRCode,children:Object(S.jsx)(H,{})})]}),Object(S.jsx)(rt.a,{delay:500,onScan:this.onScan,onError:this.onError}),this.state.data]})}}]),n}(o.a.Component),lt=function t(){Object(d.a)(this,t),this.setRoles=function(e){return t.roles=e},this.setUnitList=function(e){return t.unitList=e}};lt.roles=[],lt.unitList=[];var jt=function t(){Object(d.a)(this,t),this.getUnitList=function(){return ct("get","/v1/common/units").then((function(t){return t.data}))}};B.a.locale("zh-tw");var dt=function(t){Object(f.a)(n,t);var e=Object(b.a)(n);function n(t){var c;Object(d.a)(this,n),(c=e.call(this,t)).staticStorage=new lt,c.globalAPI=new jt,c.history=Object(I.b)(),c.getGlobalData=Object(j.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){c.globalAPI.getUnitList().then((function(e){c.staticStorage.setUnitList(e.data),t(!0)}))}));case 2:case"end":return t.stop()}}),t)}))),c.clearCookie=function(){var t=document.cookie.split(";");t.find((function(t){return t.includes("MOTOBUY_MOBILE_KEEP_LOGIN")}))&&"true"===t.find((function(t){return t.includes("MOTOBUY_MOBILE_KEEP_LOGIN")})).split("=")[1]||(document.cookie="MOTOBUY_MOBILE_AUTH=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",localStorage.removeItem("MOTOBUY_MOBILE_USERNAME"),localStorage.removeItem("MOTOBUY_MOBILE_ROLES"))},c.onLogin=function(){c.getGlobalData().then((function(){return c.setState({isAuth:!0})}))},c.onLogout=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?p.b.success("\u5df2\u6210\u529f\u767b\u51fa"):p.b.error("\u6388\u6b0a\u5df2\u904e\u671f\uff0c\u8acb\u91cd\u65b0\u767b\u5165"),document.cookie="MOTOBUY_MOBILE_AUTH=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",localStorage.removeItem("MOTOBUY_MOBILE_USERNAME"),localStorage.removeItem("MOTOBUY_MOBILE_ROLES"),c.history.replace("/"),c.setState({isAuth:!1})};var o=document.cookie.split(";");return c.state={isLand:!o.find((function(t){return t.includes("MOTOBUY_MOBILE_AUTH")})),isAuth:!1},c}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var t=this;window.logout=this.onLogout,document.cookie.split(";").find((function(t){return t.includes("MOTOBUY_MOBILE_AUTH")}))&&function(t,e,n){var c={url:"http://api.psi.motobuy.cc:8080/test"+e,method:t,timeout:6e4,headers:{Authorization:"Basic "+nt()}};return"get"===t&&n&&Object.keys(n).length>0?c.params=n:n&&Object.keys(n).length>0&&(c.data=n),new Promise((function(t,e){tt()(c).then((function(e){return t(e)})).catch((function(t){e(t),401===t.response.status&&window.logout(),console.log(t.response)}))}))}("get","/v1/auth").then((function(e){0===e.data.code?t.getGlobalData().then((function(){t.setState({isLand:!0,isAuth:!0})})):t.setState({isLand:!0})})).catch((function(){return t.setState({isLand:!0})}))}},{key:"render",value:function(){return this.state.isLand?this.state.isAuth?Object(S.jsx)(x.a,{locale:M.a,children:Object(S.jsxs)(v.a,{className:"layout-wrapper",children:[Object(S.jsxs)(v.a.Header,{className:"layout-header",children:[Object(S.jsxs)("div",{className:"layout-header-name",children:[Object(S.jsx)("div",{className:"layout-header-name-avatar",children:Object(S.jsx)(A,{})}),Object(S.jsx)("div",{children:localStorage.getItem("MOTOBUY_MOBILE_USERNAME")})]}),Object(S.jsx)("div",{className:"layout-header-logout",children:Object(S.jsx)(g.a,{onClick:this.onLogout,children:Object(S.jsx)(C,{})})})]}),Object(S.jsx)(v.a.Content,{className:"layout-content",children:Object(S.jsxs)(r.c,{children:[Object(S.jsx)(r.a,{path:"/Product",exact:!0,component:ht}),Object(S.jsx)(r.a,{path:"/",component:st})]})}),Object(S.jsx)(v.a.Footer,{className:"layout-footer",children:"2021 \xa9 Copyright"})]})}):Object(S.jsx)(x.a,{locale:M.a,children:Object(S.jsx)(ot,{onLogin:this.onLogin})}):null}}]),n}(o.a.Component);n(140),n(141),n(142),n(143);a.a.render(Object(S.jsx)(s.a,{children:Object(S.jsx)(r.a,{path:"/:type?/:page?/:id?",component:dt})}),document.getElementById("root")),u()}},[[144,1,2]]]);
//# sourceMappingURL=main.5f3be963.chunk.js.map